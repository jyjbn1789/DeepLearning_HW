name: Daily Yongin Weather Report (HW1)

on:
  schedule:
    # 매일 KST 오전 8시에 실행하려면 cron을 UTC 기준으로 설정해야 함
    # KST 08:00 = UTC 23:00 (전날)
    - cron: '0 23 * * *'
  workflow_dispatch:

jobs:
  run-weather-bot:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository code
        uses: actions/checkout@v4

      - name: Set up Python environment
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies for HW1
        run: pip install -r HW1/requirements.txt

      - name: Run the Python script for HW1
        env:
          OPENWEATHERMAP_API_KEY: ${{ secrets.OWM_API_KEY }}
          KAKAO_REST_API_KEY: ${{ secrets.KAKAO_REST_API_KEY }}
          KAKAO_TOKENS_JSON: ${{ secrets.KAKAO_TOKENS_JSON }}
        run: |
          python HW1/main.py
